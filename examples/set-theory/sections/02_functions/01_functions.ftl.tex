\documentclass[../../set-theory.tex]{subfiles}

\begin{document}
  \section{Functions}

  \begin{forthel}
    [readtex \path{set-theory/sections/01_sets/01_sets.ftl.tex}]
  \end{forthel}

  \begin{forthel}
    Let $u,v,w$ denote objects.
    Let $x,y,z$ denote sets.
    Let $f,g,h$ denote functions.
  \end{forthel}

  \noindent In this section we introduce the notion of \textit{functions} as
  some kind of \enquote{small} maps, i.e. maps whose domains are sets and whose
  values are objects.


  \subsection{Function axioms}

  \begin{forthel}
    \begin{definition}
      Let $f$ be a map.
      A value of $f$ is an object $v$ such that $v = f(u)$ for some $u \in \dom(f)$.
    \end{definition}

    \begin{definition}
      A fixed point of $f$ is an element $u$ of the domain of $f$ such that $f(u) = u$.
    \end{definition}
  \end{forthel}

  \noindent As with sets we give an \textit{extentionality axiom} for functions, which
  asserts that two functions are identical if their domains and values agree.

  \begin{forthel}
    \begin{axiom}[Function extensionality]\label{SetTheory_02_01_200419}
      Let $f,g$ be functions.
      If $\dom(f) = \dom(g)$ and $f(u) = g(u)$ for all $u \in \dom(f)$ then $f = g$.
    \end{axiom}
  \end{forthel}

  \noindent {\color{gray}Since functions are already built-in notions of
  \Naproche we cannot introduce them via a definition such as the following:

  \begin{quoteddefinition}
    A function is a map $f$ such that $\dom(f)$ is a set and every value of
    $f$ is an object.
  \end{quoteddefinition}

  \noindent Instead we have to describe them axiomatically.}

  \begin{forthel}
    \begin{axiom}
      Let $f$ be a map.
      Assume that $\dom(f)$ is a set.
      Assume that every value of $f$ is an object.
      Then $f$ is a function.
    \end{axiom}

    \begin{axiom}
      Let $f$ be a function.
      Then $f$ is a map.
    \end{axiom}

    \begin{axiom}
      Let $f$ be a function.
      Then $\dom(f)$ is a set.
    \end{axiom}

    \begin{axiom}
      Let $f$ be a function.
      Let $x$ be an element of $\dom(f)$.
      Then $f(x)$ is an object.
    \end{axiom}
  \end{forthel}

  \noindent The next axiom we introduce does not just fulfil definitional
  purposes.
  Instead it ensures that the image of any set under an arbitrary
  \textit{mapping} is also a set.
  It plays an important role in the construction of certain infinite sets.

  \begin{forthel}
    \begin{axiom}[Replacement]\label{SetTheory_02_01_303432}
      Let $f$ be a map and $x$ be a set.
      There exists a set $y$ such that $y = \class{f(u) | \text{$u \in \dom(f)$ and $u \in x$}}$.
    \end{axiom}

    \begin{corollary}\label{SetTheory_02_01_297906}
      Let $f$ be a function.
      There exists a set $y$ such that $y = \class{f(u) | u \in \dom(f)}$.
    \end{corollary}
    \begin{proof}
      Take $x = \dom(f)$.
      Then $x$ is a set.
      Hence we can take a set $y$ such that $y = \class{f(u) | u \in \dom(f)}$ (by \nameref{SetTheory_02_01_303432}).
      Indeed $f$ is a map.
    \end{proof}
  \end{forthel}


  \subsection{The range}

  Using the replacement axiom we can easily define the \textit{range} of a
  function as the set of all its values.

  \begin{forthel}
    \begin{definition}
      Let $f$ be a function.
      $\range(f)$ is the set $y$ such that $y = \class{f(u) | u \in \dom(f)}$.
    \end{definition}

    Let the range of $f$ stand for $\range(f)$.


    \begin{proposition}\label{SetTheory_02_01_324423}
      $v$ is a value of $f$ iff $v \in \range(f)$.
    \end{proposition}
    \begin{proof}
      Case $v$ is a value of $f$.
        Take $u \in \dom(f)$ such that $v = f(u)$.
        $v$ is an element.
        Hence $v \in \range(f)$.
      End.

      Case $v \in \range(f)$.
        Then $v = f(u)$ for some $u \in \dom(f)$.
        Hence $v$ is a value of $f$.
      End.
    \end{proof}
  \end{forthel}


  \subsection{Functions between sets}

  In the following we mostly want to consider functions \textit{between} two
  sets $x$ and $y$, i.e. functions whose domain is $x$ and which maps all
  elements of $x$ into $y$.

  \begin{forthel}
    \begin{definition}
      A function of $x$ is a function $f$ such that $\dom(f) = x$.
    \end{definition}

    \begin{definition}
      A function to $y$ is a function $f$ such that $f(u) \in y$ for all $u \in \dom(f)$.
    \end{definition}

    Let a function from $x$ to $y$ stand for a function $f$ of $x$ such that $f$ is a function to $y$.
    Let $f: x \to y$ stand for $f$ is a function from $x$ to $y$.

    \begin{proposition}\label{SetTheory_02_01_694542}
      Let $f$ be a function from $x$ to $y$.
      Then $\range(f) \subseteq y$.
    \end{proposition}
    \begin{proof}
      Let $v \in \range(f)$.
      Take $u \in x$ such that $v = f(u)$.
      Then $v \in y$.
    \end{proof}

    \begin{definition}
      A function on $x$ is a function from $x$ to $x$.
    \end{definition}
  \end{forthel}

  \noindent There are three important types of functions:
  Functions which are \textit{injective}, i.e. one-to-one correspondences
  between their domain and range, functions which are \textit{surjrective},
  i.e. whose values match all elements of a given set, and functions which are
  \textit{bijective}, i.e. both \textit{injective} and \textit{surjective}.

  \begin{forthel}
    \begin{definition}
      A function onto $y$ is a function $f$ such that $y = \range(f)$.
    \end{definition}

    Let $f$ surjects onto $y$ stand for $y = \range(f)$.

    \begin{definition}
      A function from $x$ onto $y$ is a function $f$ of $x$ such that $f$ is a function onto $y$.
    \end{definition}

    Let $f: x \onto y$ stand for $f$ is a function from $x$ onto $y$.

    \begin{proposition}\label{SetTheory_02_01_677451}
      $f$ is a function onto $\range(f)$.
    \end{proposition}

    \begin{proposition}\label{SetTheory_02_01_495468}
      Let $f$ be a function onto $y$.
      Then $f$ is a function to $y$.
    \end{proposition}
    \begin{proof}
      Let $u \in \dom(f)$.
      Then $f(u) \in \range(f)$.
      Hence $f(u) \in y$.
    \end{proof}

    \begin{proposition}\label{SetTheory_02_01_195739}
      Let $f$ be a function to $y$.
      $f$ is a function onto $y$ iff every element of $y$ is a value of $f$.
    \end{proposition}
    \begin{proof}
      Case $f$ is a function onto $y$.
        Then $y = \range(f)$.
        Let $v$ be an element of $y$.
        Then $v$ is an element of $\range(f)$.
        Hence $v$ is a value of $f$.
      End.

      Case every element of $y$ is a value of $f$.
        Let us show that $y \subseteq \range(f)$.
          Let $v \in y$.
          Then $v$ is a value of $f$.
          Hence $v \in \range(f)$.
        End.

        Let us show that $\range(f) \subseteq y$.
          Let $v \in \range(f)$.
          Then $v$ is a value of $f$.
          Hence $v \in y$.
        End.
      End.
    \end{proof}

    \begin{definition}
      $f$ is one to one iff for all $u,v \in \dom(f)$ if $f(u) = f(v)$ then $u = v$.
    \end{definition}

    \begin{definition}
      A function into $y$ is an one to one function to $y$.
    \end{definition}

    \begin{definition}
      A function from $x$ into $y$ is a function $f$ of $x$ such that $f$ is a function into $y$.
    \end{definition}

    Let $f: x \into y$ stand for $f$ is a function from $x$ into $y$.

    \begin{definition}
      A bijection between $x$ and $y$ is a one to one function $f$ from $x$ onto $y$.
    \end{definition}

    Let a bijection from $x$ to $y$ stand for a bijection between $x$ and $y$.

    \begin{proposition}\label{SetTheory_02_01_717927}
      Let $f$ be a function from $x$ into $y$.
      Then $f$ is a bijection between $x$ and $\range(f)$.
    \end{proposition}
    \begin{proof}
      $f$ is one to one and $f$ is a function from $x$ onto $\range(f)$.
      Hence $f$ is a bijection between $x$ and $\range(f)$.
    \end{proof}

    \begin{definition}
      A permutation of $x$ is a bijection between $x$ and $x$.
    \end{definition}
  \end{forthel}


  \subsection{The identity function}

  Let us consider some special function:
  The \textit{identity} function, which just maps any element of its domain to
  itself.

  \begin{forthel}
    \begin{lemma}
      There is a function $\iota$ of $x$ such that $\iota(u) = u$ for all $u \in x$.
    \end{lemma}
    \begin{proof}
      Define $\iota(u) = u$ for $u \in x$.
    \end{proof}

    \begin{definition}
      $\id_{x}$ is the function of $x$ such that $\id_{x}(u) = u$ for all $u \in x$.
    \end{definition}

    Let the identity function on $x$ stand for $\id_{x}$.

    \begin{proposition}\label{SetTheory_02_01_848243}
      $\id_{x}$ is a permutation of $x$.
    \end{proposition}
    \begin{proof}
      (1) $\id_{x}$ is a function of $x$.

      (2) $\id_{x}$ is a function onto $x$.
      Proof.
        Let $v \in x$.
        Then $v = \id_{x}(v)$.
        Hence $v \in \range(\id_{x})$.
      Qed.

      (3) $\id_{x}$ is a function into $x$.
      Proof.
        Let $v,v' \in x$.
        Assume $\id_{x}(v) = \id_{x}(v')$.
        Then $v = v'$.
      Qed.
    \end{proof}
  \end{forthel}


  \subsection{Constant functions}

  Another importat class of functions is that of \textit{constant} functions.
  Such functions map every element of their domain to the same value.

  \begin{forthel}
    \begin{lemma}
      Let $x$ be a set and $v$ be an element.
      There is a function $c$ of $x$ such that $c(u) = v$ for all $u \in x$.
    \end{lemma}
    \begin{proof}
      Define $c(u) = v$ for $u \in x$.
    \end{proof}

    \begin{definition}
      $\const{x}{v}$ is the function of $x$ such that $\const{x}{v}(u) = v$ for all $u \in x$.
    \end{definition}

    Let the constant function on $x$ with value $v$ stand for $\const{x}{v}$.

    \begin{proposition}\label{SetTheory_02_01_180417}
      Assume $v \in y$.
      Then $\const{x}{v}$ is a function from $x$ to $y$.
    \end{proposition}
    \begin{proof}
      We have $\dom(\const{x}{v}) = x$ and $\const{x}{v}(u) = v$ for all $u \in x$.
      Hence $\const{x}{v}(u)$ is an element of $y$ for all $u \in x$.
      Thus $\range(\const{x}{v}) \subseteq y$.
      Therefore $\const{x}{v}$ is a function from $x$ to $y$.
    \end{proof}

    \begin{definition}
      Let $f$ be a function.
      $f$ is constant iff there exists an object $v$ such that $f(u) = v$ for all $u \in \dom(f)$.
    \end{definition}

    \begin{proposition}\label{SetTheory_02_01_359618}
      $\const{x}{v}$ is constant.
    \end{proposition}
    \begin{proof}
      We have $\const{x}{v}(u) = v$ for all $u \in x$.
      Hence the thesis.
    \end{proof}
  \end{forthel}


  \subsection{Composition}

  Let us now consider some operations on functions.
  The first one, called \textit{composition}, allows us to combine two functions
  to a new one by applying them one after another.

  \begin{forthel}
    \begin{lemma}
      Assume $\range(f) \subseteq \dom(g)$.
      Then there is a function $h$ such that $\dom(h) = \dom(f)$ and $h(u) = g(f(u))$ for all $u \in \dom(h)$.
    \end{lemma}
    \begin{proof}
      Define $h(u) = g(f(u))$ for $u \in \dom(f)$.
    \end{proof}

    \begin{definition}
      Assume $\range(f) \subseteq \dom(g)$.
      $g \circ f$ is the function $h$ such that $\dom(h) = \dom(f)$ and $h(u) = g(f(u))$ for all $u \in \dom(h)$.
    \end{definition}

    Let the composition of $g$ and $f$ stand for $g \circ f$.

    \begin{lemma}
      Let $f$ be a function from $x$ to $y$ and $g$ be a function from $y$ to $z$.
      Then $\range(f) \subseteq \dom(g)$.
    \end{lemma}

    \begin{proposition}\label{SetTheory_02_01_289732}
      Let $f$ be a function from $x$ to $y$ and $g$ be a function from $y$ to $z$.
      Then $g \circ f$ is a function from $x$ to $z$.
    \end{proposition}
    \begin{proof}
      (1) $g \circ f$ is a function of $x$.
      Indeed $\dom(g \circ f) = \dom(f) = x$.

      (2) $\range(g \circ f) \subseteq z$.
      Proof.
        Let $w \in \range(g \circ f)$.
        Take $u \in x$ such that $(g \circ f)(u) = w$.
        Then $w = g(f(u))$.
        We have $f(u) \in y$.
        Hence $w \in z$.
      Qed.
    \end{proof}

    \begin{lemma}
      Let $f$ be a function from $x$ to $y$ and $g$ be a function from $y$ to $z$.
      Then $\dom(g \circ f) = x$ and $\range(g \circ f) \subseteq z$.
    \end{lemma}

    \begin{proposition}\label{SetTheory_02_01_718601}
      Let $f$ be a function from $x$ to $y$.
      Then $f \circ \id_{x} = f = \id_{y} \circ f$.
    \end{proposition}
    \begin{proof}
      $x$ is the domain of $f \circ \id_{x}$ and the domain of $f$ and the domain of $\id_{y} \circ f$.
      $(f \circ \id_{x})(u) = f(\id_{x}(u)) = f(u) = \id_{y}(f(u)) = (\id_{y} \circ f)(u)$ for all $u \in x$.
      Hence the thesis (by \nameref{SetTheory_02_01_200419}).
    \end{proof}

    \begin{proposition}\label{SetTheory_02_01_558108}
      Let $f$ be a function from $x$ to $y$ and $v$ be an element.
      Then $\const{y}{v} \circ f = \const{x}{v}$.
    \end{proposition}
    \begin{proof}
      We have $\dom(\const{y}{v} \circ f) = \dom(f) = x = \dom(\const{x}{v})$.
      $(\const{y}{v} \circ f)(u) = \const{y}{v}(f(u)) = v = \const{x}{v}(u)$ for all $u \in x$.
      Hence the thesis (by \nameref{SetTheory_02_01_200419}).
    \end{proof}

    \begin{proposition}\label{SetTheory_02_01_795869}
      Let $f$ be a function from $y$ to $z$ and $v \in y$.
      Then $f \circ \const{x}{v} = \const{x}{f(v)}$.
    \end{proposition}
    \begin{proof}
      We have
      \[  \dom(f \circ \const{x}{v})
          = \dom(\const{x}{v})
          = x
          = \dom(\const{x}{f(v)}). \]

      For all $u \in x$ we have
      \[  (f \circ \const{x}{v})(u)
          = f(\const{x}{v}(u))
          = f(v)
          = \const{x}{f(v)}(u). \]
      Hence the thesis (by \nameref{SetTheory_02_01_200419}).
    \end{proof}

    \begin{proposition}\label{SetTheory_02_01_205975}
      Let $f$ be a function from $x$ onto $y$ and $g$ be a function from $y$ onto $z$.
      Then $g \circ f$ is a function from $x$ onto $z$.
    \end{proposition}
    \begin{proof}
      $g \circ f$ is a function of $x$.

      Let us show that $g \circ f$ is a function onto $z$.
        Let $w \in z$.
        Take $v \in y$ such that $w = g(v)$.
        Take $u \in x$ such that $v = f(u)$.
        Then $w = g(f(u)) = (g \circ f)(u)$.
      End.
    \end{proof}

    \begin{proposition}\label{SetTheory_02_01_784576}
      Let $f$ be a function from $x$ into $y$ and $g$ be a function from $y$ into $z$.
      Then $g \circ f$ is a function from $x$ into $z$.
    \end{proposition}
    \begin{proof}
      $g \circ f$ is a function of $x$.

      Let us show that $g \circ f$ is one to one.
        Let $u,u' \in x$.
        Assume $(g \circ f)(u) = (g \circ f)(u')$.
        Then $g(f(u)) = g(f(u'))$.
        Hence $f(u) = f(u')$.
        Indeed $f(u), f(u') \in y$.
        Thus $u = u'$.
      End.
    \end{proof}

    \begin{corollary}\label{SetTheory_02_01_627406}
      Let $f$ be a bijection between $x$ and $y$ and $g$ be a bijection between $y$ and $z$.
      Then $g \circ f$ is a bijection between $x$ and $z$.
    \end{corollary}
    \begin{proof}
      $g \circ f$ is a function from $x$ onto $z$ and a function into $z$.
      Hence the thesis.
    \end{proof}
  \end{forthel}


  \subsection{Restriction}

  Another operation on functions is the \textit{restriction} to a subset of
  their domain.

  \begin{forthel}
    \begin{lemma}
      Let $a \subseteq \dom(f)$.
      Then there is a function $h$ of $a$ such that $h(u) = f(u)$ for all $u \in a$.
    \end{lemma}
    \begin{proof}
      Define $h(u) = f(u)$ for $u \in a$.
    \end{proof}

    \begin{definition}
      Let $a \subseteq \dom(f)$.
      $f \restr a$ is the function $h$ of $a$ such that $h(u) = f(u)$ for all $u \in a$.
    \end{definition}

    Let the restriction of $f$ to $a$ stand for $f \restr a$.

    \begin{proposition}\label{SetTheory_02_01_589280}
      Let $f$ be a function from $x$ to $y$ and $a \subseteq x$.
      Then $f \restr a$ is a function from $a$ to $y$.
    \end{proposition}
    \begin{proof}
      We have $\dom(f \restr a) = a$.
      Then $(f \restr a)(u) = f(u) \in y$ for all $u \in a$.
      Hence $f \restr a$ is a function from $a$ to $y$.
    \end{proof}

    \begin{proposition}\label{SetTheory_02_01_795968}
      Let $a \subseteq x$.
      Then $\id_{x} \restr a = \id_{a}$.
    \end{proposition}
    \begin{proof}
      We have $\dom(\id_{x} \restr a) = a = \dom(\id_{a})$.
      $(\id_{x} \restr a)(u) = \id_{x}(u) = u = \id_{a}(u)$ for all $u \in a$.
      Hence the thesis (by \nameref{SetTheory_02_01_200419}).
    \end{proof}

    \begin{proposition}\label{SetTheory_02_01_575265}
      Let $v$ be an element and $a \subseteq x$.
      Then $\const{x}{v} \restr a = \const{a}{v}$.
    \end{proposition}
    \begin{proof}
      We have $\dom(\const{x}{v} \restr a) = a = \dom(\const{a}{v})$.
      $(\const{x}{v} \restr a)(u) = \const{x}{v}(u) = v = \const{a}{v}(u)$ for all $u \in a$.
      Hence the thesis (by \nameref{SetTheory_02_01_200419}).
    \end{proof}

    \begin{proposition}\label{SetTheory_02_01_507691}
      Let $f$ be an one to one function from $x$ to $y$ and $a \subseteq x$.
      Then $f \restr a$ is one to one.
    \end{proposition}
    \begin{proof}
      Let $u,u' \in a$.
      Assume $(f \restr a)(u) = (f \restr a)(u')$.
      Then $f(u) = f(u')$.
      Hence $u = u'$.
    \end{proof}
  \end{forthel}
\end{document}
